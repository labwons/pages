const isLabTop=window.matchMedia('(max-width: 1443px)');const isTablet=window.matchMedia('(max-width: 1023px)');const isMobile=window.matchMedia('(max-width: 767px)');const isNarrow=window.matchMedia('(max-width: 374px)');const fontFamily='NanumGothic, Nanum Gothic, Open Sans, sans-serif';var Layout={barmode:'group',showlegend:false,dragmode:false,margin:{l:20,r:0,t:0,b:20},xaxis:{tickangle:0,showline:true,zerolinecolor:"lightgrey",gridcolor:"lightgrey",},yaxis:{ticklabelposition:'inside',tickformat:'d',showline:true,zerolinecolor:"lightgrey",gridcolor:"lightgrey",},autosize:true,hoverlabel:{font:{family:fontFamily,color:'#fffff'}},};var Option={showTips:false,responsive:true,displayModeBar:false,displaylogo:false,modeBarButtonsToRemove:['toImage','select2d','lasso2d','resetScale2d']};const srcTickers={"016590":{"startDate":"2025-04-09","startBuy":7170,"date":"2025\/04\/22","close":7580,"marketCap":"3054\uc5b5","volume":14778,"amount":111624945,"PBR":0.43,"dividendYield":1.98,"foreignRate":2.85,"D-1":-0.92,"W-1":-2.7,"M-1":10.66,"M-3":31.37,"M-6":32.52,"Y-1":32.98,"beta":0.3852,"floatShares":16.25,"trailingRevenue":6585.03,"trailingEps":871,"trailingProfitRate":4.45,"averageRevenueGrowth_A":2.14,"averageProfitGrowth_A":-14.3,"averageEpsGrowth_A":-2.63,"RevenueGrowth_A":2.04,"RevenueGrowth_Q":3.05,"ProfitGrowth_A":-49.95,"ProfitGrowth_Q":212.65,"EpsGrowth_A":-26.6,"EpsGrowth_Q":-841.18,"fiscalDividendYield":3.49,"fiscalDebtRatio":26.56,"pct52wHigh":-2.7,"pct52wLow":54.22,"pctEstimated":null,"estimatedPE":null,"trailingPS":0.46,"trailingPE":8.7,"turnoverRatio":0.04,"market":"kospi","name":"\uc2e0\ub300\uc591\uc81c\uc9c0","industryCode":"WI200","industryName":"\ube44\ucca0\uae08\uc18d","sectorCode":"G15","sectorName":"\uc18c\uc7ac","stockSize":null,"timeDiff":"13 days","yield":5.72,"yieldColor":"#EE8C8C","profitColor":"#36704E","peColor":"#2FB755","epeColor":"#414554","meta1":"\ud22c\uc790 \uc2dc\uc791\uc77c: 2025\/04\/09(13\uc77c\ucc28)<br>\ud22c\uc790 \uc218\uc775\ub960: 5.72%<br>","meta2":"\uc601\uc5c5\uc774\uc775\ub960: 4.45%<br>\uc139\ud130: \uc18c\uc7ac<br>\uc5c5\uc885: \ube44\ucca0\uae08\uc18d<br>\uc2dc\uac00\ucd1d\uc561: 3054\uc5b5\uc6d0<br>"},"052400":{"startDate":"2025-04-21","startBuy":35050,"date":"2025\/04\/22","close":35850,"marketCap":"5188\uc5b5","volume":589603,"amount":20901165300,"PBR":2.74,"dividendYield":1.39,"foreignRate":1.86,"D-1":0.14,"W-1":16.59,"M-1":40.04,"M-3":55.87,"M-6":168.74,"Y-1":96.98,"beta":0.1012,"floatShares":59.35,"trailingRevenue":2403.16,"trailingEps":1674,"trailingProfitRate":17.6,"averageRevenueGrowth_A":16.43,"averageProfitGrowth_A":30.7,"averageEpsGrowth_A":33.5,"RevenueGrowth_A":-15.67,"RevenueGrowth_Q":-2.92,"ProfitGrowth_A":-0.8,"ProfitGrowth_Q":107.21,"EpsGrowth_A":4.32,"EpsGrowth_Q":-8.0,"fiscalDividendYield":2.46,"fiscalDebtRatio":108.85,"pct52wHigh":-22.57,"pct52wLow":168.74,"pctEstimated":null,"estimatedPE":null,"trailingPS":2.16,"trailingPE":21.42,"turnoverRatio":4.03,"market":"kosdaq","name":"\ucf54\ub098\uc544\uc774*","industryCode":"WI602","industryName":"IT\uc11c\ube44\uc2a4","sectorCode":"G45","sectorName":"IT","stockSize":null,"timeDiff":"1 days","yield":2.28,"yieldColor":"#C29B9B","profitColor":"#30CC5A","peColor":"#3B5A51","epeColor":"#414554","meta1":"\ud22c\uc790 \uc2dc\uc791\uc77c: 2025\/04\/21(1\uc77c\ucc28)<br>\ud22c\uc790 \uc218\uc775\ub960: 2.28%<br>","meta2":"\uc601\uc5c5\uc774\uc775\ub960: 17.6%<br>\uc139\ud130: IT<br>\uc5c5\uc885: IT\uc11c\ube44\uc2a4<br>\uc2dc\uac00\ucd1d\uc561: 5188\uc5b5\uc6d0<br>"},"183300":{"startDate":"2025-04-21","startBuy":62000,"date":"2025\/04\/22","close":61400,"marketCap":"6412\uc5b5","volume":103962,"amount":6398686950,"PBR":3.04,"dividendYield":0.65,"foreignRate":19.83,"D-1":0.16,"W-1":2.16,"M-1":7.34,"M-3":46.36,"M-6":21.83,"Y-1":-24.1,"beta":1.0576,"floatShares":53.71,"trailingRevenue":5071.38,"trailingEps":5341,"trailingProfitRate":22.18,"averageRevenueGrowth_A":27.95,"averageProfitGrowth_A":64.91,"averageEpsGrowth_A":30.34,"RevenueGrowth_A":65.05,"RevenueGrowth_Q":0.13,"ProfitGrowth_A":240.51,"ProfitGrowth_Q":-35.05,"EpsGrowth_A":73.94,"EpsGrowth_Q":104.3,"fiscalDividendYield":2.73,"fiscalDebtRatio":113.02,"pct52wHigh":-36.7,"pct52wLow":88.06,"pctEstimated":-27.76,"estimatedPE":10.53,"trailingPS":1.26,"trailingPE":11.5,"turnoverRatio":1.0,"market":"kosdaq","name":"\ucf54\ubbf8\ucf54*","industryCode":"WI620","industryName":"\ubc18\ub3c4\uccb4","sectorCode":"G45","sectorName":"IT","stockSize":"large","timeDiff":"1 days","yield":-0.97,"yieldColor":"#9FA9B1","profitColor":"#30CC5A","peColor":"#2FA14F","epeColor":"#2FA951","meta1":"\ud22c\uc790 \uc2dc\uc791\uc77c: 2025\/04\/21(1\uc77c\ucc28)<br>\ud22c\uc790 \uc218\uc775\ub960: -0.97%<br>","meta2":"\uc601\uc5c5\uc774\uc775\ub960: 22.18%<br>\uc139\ud130: IT<br>\uc5c5\uc885: \ubc18\ub3c4\uccb4<br>\uc2dc\uac00\ucd1d\uc561: 6412\uc5b5\uc6d0<br>"}};function setYield(){var maxRange=0;var minRange=0;var layout=JSON.parse(JSON.stringify(Layout));var data={type:'bar',x:[],y:[],meta:[],texttemplate:'%{y:.2f}%',textposition:'outside',hovertemplate:'%{meta}<extra></extra>',marker:{color:[]}};Object.entries(srcTickers).forEach(([ticker,obj])=>{data.x.push(obj.name);data.y.push(obj['yield']);data.meta.push(obj.meta1);data.marker.color.push(obj.yieldColor);maxRange=obj['yield']>maxRange?obj['yield']:maxRange;minRange=obj['yield']<minRange?obj['yield']:minRange;});var space=0.1*(maxRange-minRange);maxRange=maxRange+space;if(minRange<0){minRange=minRange-space;}
layout.yaxis.range=[minRange,maxRange];Plotly.newPlot('plotly-yield',[data],layout,Option);}
function setPrice(){var maxRange=0;var minRange=0;var layout=JSON.parse(JSON.stringify(Layout));var data1={type:'bar',x:[],y:[],meta:[],hovertemplate:'매수가: %{y:,d}원<extra></extra>',marker:{color:[]}};var data2=JSON.parse(JSON.stringify(data1));data2.hovertemplate='현재가: %{y:,d}원<extra></extra>'
Object.entries(srcTickers).forEach(([ticker,obj])=>{data1.x.push(obj.name);data1.y.push(obj.startBuy);data1.marker.color.push('grey');maxRange=obj.startBuy>maxRange?obj.startBuy:maxRange;});Object.entries(srcTickers).forEach(([ticker,obj])=>{data2.x.push(obj.name);data2.y.push(obj.close);data2.marker.color.push(obj.startBuy>obj.close?'blue':'red');maxRange=obj.close>maxRange?obj.close:maxRange;});layout.yaxis.range=[0,1.1*maxRange];Plotly.newPlot('plotly-price',[data1,data2],layout,Option);}
function setProfit(){var maxRange=0;var minRange=0;var layout=JSON.parse(JSON.stringify(Layout));var data={type:'bar',x:[],y:[],meta:[],hovertemplate:'%{meta}<extra></extra>',marker:{color:[]}};Object.entries(srcTickers).forEach(([ticker,obj])=>{data.x.push(obj.name);data.y.push(obj.trailingProfitRate);data.meta.push(obj.meta2);data.marker.color.push(obj.profitColor);maxRange=obj.trailingProfitRate>maxRange?obj.trailingProfitRate:maxRange;minRange=obj.trailingProfitRate<minRange?obj.trailingProfitRate:minRange;});console.log(minRange);layout.yaxis.range=[1.1*minRange,1.1*maxRange];Plotly.newPlot('plotly-profit',[data],layout,Option);}
function setPe(){var maxRange=0;var minRange=0;var layout=JSON.parse(JSON.stringify(Layout));var data1={type:'bar',x:[],y:[],meta:[],hovertemplate:'4분기연속PE: %{y:.2f}<extra></extra>',marker:{color:[]}};var data2=JSON.parse(JSON.stringify(data1));data2.hovertemplate='12개월ForwardPE: %{y:.2f}<extra></extra>',Object.entries(srcTickers).forEach(([ticker,obj])=>{data1.x.push(obj.name);data1.y.push(obj.trailingPE);data1.marker.color.push(obj.peColor);maxRange=obj.trailingPE>maxRange?obj.trailingPE:maxRange;});Object.entries(srcTickers).forEach(([ticker,obj])=>{data2.x.push(obj.name);data2.y.push(obj.estimatedPE);data2.marker.color.push(obj.epeColor);maxRange=obj.estimatedPE>maxRange?obj.estimatedPE:maxRange;});layout.yaxis.range=[0,1.1*maxRange];Plotly.newPlot('plotly-pe',[data1,data2],layout,Option);}
$(document).ready(function(){setYield();setPrice();setProfit();setPe();})