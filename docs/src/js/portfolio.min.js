const isLabTop=window.matchMedia('(max-width: 1443px)');const isTablet=window.matchMedia('(max-width: 1023px)');const isMobile=window.matchMedia('(max-width: 767px)');const isNarrow=window.matchMedia('(max-width: 374px)');const fontFamily='NanumGothic, Nanum Gothic, Open Sans, sans-serif';var Layout={barmode:'group',showlegend:false,dragmode:false,margin:{l:20,r:0,t:0,b:20},xaxis:{tickangle:0,showline:true,zerolinecolor:"lightgrey",gridcolor:"lightgrey",},yaxis:{ticklabelposition:'inside',tickformat:'d',showline:true,zerolinecolor:"lightgrey",gridcolor:"lightgrey",},autosize:true,hoverlabel:{font:{family:fontFamily,color:'#fffff'}},};var Option={showTips:false,responsive:true,displayModeBar:false,displaylogo:false,modeBarButtonsToRemove:['toImage','select2d','lasso2d','resetScale2d']};const srcTickers={"251970":{"startDate":"2025-03-28","startBuy":49200,"date":"2025\/04\/08","close":50100,"marketCap":"6224\uc5b5","volume":60992,"amount":3089060550,"PBR":2.61,"dividendYield":0.76,"foreignRate":12.43,"D-1":-2.72,"W-1":1.01,"M-1":15.84,"M-3":17.74,"M-6":49.55,"Y-1":110.95,"beta":0.6754,"floatShares":39.33,"trailingRevenue":3374.84,"trailingEps":2637,"trailingProfitRate":14.34,"averageRevenueGrowth_A":14.56,"averageProfitGrowth_A":16.79,"averageEpsGrowth_A":15.2,"RevenueGrowth_A":18.63,"RevenueGrowth_Q":5.46,"ProfitGrowth_A":37.14,"ProfitGrowth_Q":4.63,"EpsGrowth_A":21.13,"EpsGrowth_Q":25.94,"fiscalDividendYield":0.97,"fiscalDebtRatio":27.12,"pct52wHigh":-7.56,"pct52wLow":111.84,"pctEstimated":-14.72,"estimatedPE":15.75,"trailingPS":1.84,"trailingPE":19.0,"turnoverRatio":0.5,"market":"kosdaq","name":"\ud38c\ud14d\ucf54\ub9ac\uc544*","industryCode":"WI200","industryName":"\ube44\ucca0\uae08\uc18d","sectorCode":"G15","sectorName":"\uc18c\uc7ac","stockSize":null,"timeDiff":"11 days","yield":1.83,"yieldColor":"#BD9D9D","profitColor":"#2FC558","peColor":"#376D4F","epeColor":"#32854E","meta1":"\ud22c\uc790 \uc2dc\uc791\uc77c: 2025\/03\/28(11\uc77c\ucc28)<br>\ud22c\uc790 \uc218\uc775\ub960: 1.83%<br>","meta2":"\uc601\uc5c5\uc774\uc775\ub960: 14.34%<br>\uc139\ud130: \uc18c\uc7ac<br>\uc5c5\uc885: \ube44\ucca0\uae08\uc18d<br>\uc2dc\uac00\ucd1d\uc561: 6224\uc5b5\uc6d0<br>"},"102710":{"startDate":"2025-04-02","startBuy":26000,"date":"2025\/04\/08","close":24650,"marketCap":"3521\uc5b5","volume":115631,"amount":2865743475,"PBR":0.98,"dividendYield":0.2,"foreignRate":6.61,"D-1":1.65,"W-1":-2.76,"M-1":6.25,"M-3":28.25,"M-6":19.08,"Y-1":-1.4,"beta":1.1016,"floatShares":64.36,"trailingRevenue":5824.34,"trailingEps":2177,"trailingProfitRate":10.19,"averageRevenueGrowth_A":6.33,"averageProfitGrowth_A":43.05,"averageEpsGrowth_A":-80.65,"RevenueGrowth_A":9.66,"RevenueGrowth_Q":-26.69,"ProfitGrowth_A":148.52,"ProfitGrowth_Q":-22.81,"EpsGrowth_A":-277.94,"EpsGrowth_Q":-70.71,"fiscalDividendYield":0.89,"fiscalDebtRatio":80.26,"pct52wHigh":-25.53,"pct52wLow":70.35,"pctEstimated":null,"estimatedPE":null,"trailingPS":0.6,"trailingPE":11.32,"turnoverRatio":0.81,"market":"kosdaq","name":"\uc774\uc5d4\uc5d0\ud504\ud14c\ud06c\ub180\ub85c\uc9c0*","industryCode":"WI620","industryName":"\ubc18\ub3c4\uccb4","sectorCode":"G45","sectorName":"IT","stockSize":null,"timeDiff":"6 days","yield":-5.19,"yieldColor":"#80B9E5","profitColor":"#2F9F4F","peColor":"#2FA350","epeColor":"#414554","meta1":"\ud22c\uc790 \uc2dc\uc791\uc77c: 2025\/04\/02(6\uc77c\ucc28)<br>\ud22c\uc790 \uc218\uc775\ub960: -5.19%<br>","meta2":"\uc601\uc5c5\uc774\uc775\ub960: 10.19%<br>\uc139\ud130: IT<br>\uc5c5\uc885: \ubc18\ub3c4\uccb4<br>\uc2dc\uac00\ucd1d\uc561: 3521\uc5b5\uc6d0<br>"},"005180":{"startDate":"2025-04-03","startBuy":97000,"date":"2025\/04\/08","close":93400,"marketCap":"9191\uc5b5","volume":38038,"amount":3571740750,"PBR":1.29,"dividendYield":2.78,"foreignRate":21.44,"D-1":-0.64,"W-1":-1.37,"M-1":2.52,"M-3":19.13,"M-6":49.2,"Y-1":62.15,"beta":0.3648,"floatShares":48.86,"trailingRevenue":14630.42,"trailingEps":10479,"trailingProfitRate":8.97,"averageRevenueGrowth_A":11.26,"averageProfitGrowth_A":54.45,"averageEpsGrowth_A":-33.21,"RevenueGrowth_A":4.93,"RevenueGrowth_Q":-37.27,"ProfitGrowth_A":16.95,"ProfitGrowth_Q":-99.03,"EpsGrowth_A":19.73,"EpsGrowth_Q":-101.71,"fiscalDividendYield":4.05,"fiscalDebtRatio":38.96,"pct52wHigh":-16.68,"pct52wLow":63.29,"pctEstimated":-24.68,"estimatedPE":8.21,"trailingPS":0.63,"trailingPE":8.91,"turnoverRatio":0.39,"market":"kospi","name":"\ube59\uadf8\ub808","industryCode":"WI400","industryName":"\ud544\uc218\uc18c\ube44\uc7ac","sectorCode":"G30","sectorName":"\ud544\uc218\uc18c\ube44\uc7ac","stockSize":null,"timeDiff":"5 days","yield":-3.71,"yieldColor":"#8BB3D3","profitColor":"#30954E","peColor":"#2FB554","epeColor":"#2FBB55","meta1":"\ud22c\uc790 \uc2dc\uc791\uc77c: 2025\/04\/03(5\uc77c\ucc28)<br>\ud22c\uc790 \uc218\uc775\ub960: -3.71%<br>","meta2":"\uc601\uc5c5\uc774\uc775\ub960: 8.97%<br>\uc139\ud130: \ud544\uc218\uc18c\ube44\uc7ac<br>\uc5c5\uc885: \ud544\uc218\uc18c\ube44\uc7ac<br>\uc2dc\uac00\ucd1d\uc561: 9191\uc5b5\uc6d0<br>"},"097520":{"startDate":"2025-04-04","startBuy":24000,"date":"2025\/04\/08","close":21550,"marketCap":"3883\uc5b5","volume":44807,"amount":988171500,"PBR":1.17,"dividendYield":2.78,"foreignRate":9.65,"D-1":-2.49,"W-1":-10.4,"M-1":-7.91,"M-3":9.73,"M-6":18.41,"Y-1":-12.04,"beta":1.0523,"floatShares":61.88,"trailingRevenue":10570.58,"trailingEps":3538,"trailingProfitRate":4.2,"averageRevenueGrowth_A":-3.93,"averageProfitGrowth_A":24.75,"averageEpsGrowth_A":27.44,"RevenueGrowth_A":13.36,"RevenueGrowth_Q":21.76,"ProfitGrowth_A":143.55,"ProfitGrowth_Q":499.68,"EpsGrowth_A":127.82,"EpsGrowth_Q":970.5,"fiscalDividendYield":4.17,"fiscalDebtRatio":54.24,"pct52wHigh":-19.14,"pct52wLow":28.58,"pctEstimated":-33.69,"estimatedPE":7.34,"trailingPS":0.37,"trailingPE":6.09,"turnoverRatio":0.25,"market":"kospi","name":"\uc5e0\uc528\ub125\uc2a4","industryCode":"WI610","industryName":"IT\ud558\ub4dc\uc6e8\uc5b4","sectorCode":"G45","sectorName":"IT","stockSize":null,"timeDiff":"4 days","yield":-10.21,"yieldColor":"#4EA7F1","profitColor":"#366E4E","peColor":"#2FCB59","epeColor":"#2FC157","meta1":"\ud22c\uc790 \uc2dc\uc791\uc77c: 2025\/04\/04(4\uc77c\ucc28)<br>\ud22c\uc790 \uc218\uc775\ub960: -10.21%<br>","meta2":"\uc601\uc5c5\uc774\uc775\ub960: 4.2%<br>\uc139\ud130: IT<br>\uc5c5\uc885: IT\ud558\ub4dc\uc6e8\uc5b4<br>\uc2dc\uac00\ucd1d\uc561: 3883\uc5b5\uc6d0<br>"}};function setYield(){var maxRange=0;var minRange=0;var layout=JSON.parse(JSON.stringify(Layout));var data={type:'bar',x:[],y:[],meta:[],texttemplate:'%{y:.2f}%',textposition:'outside',hovertemplate:'%{meta}<extra></extra>',marker:{color:[]}};Object.entries(srcTickers).forEach(([ticker,obj])=>{data.x.push(obj.name);data.y.push(obj['yield']);data.meta.push(obj.meta1);data.marker.color.push(obj.yieldColor);maxRange=obj['yield']>maxRange?obj['yield']:maxRange;minRange=obj['yield']<minRange?obj['yield']:minRange;});var space=0.1*(maxRange-minRange);maxRange=maxRange+space;if(minRange<0){minRange=minRange-space;}
layout.yaxis.range=[minRange,maxRange];Plotly.newPlot('plotly-yield',[data],layout,Option);}
function setPrice(){var maxRange=0;var minRange=0;var layout=JSON.parse(JSON.stringify(Layout));var data1={type:'bar',x:[],y:[],meta:[],hovertemplate:'매수가: %{y:,d}원<extra></extra>',marker:{color:[]}};var data2=JSON.parse(JSON.stringify(data1));data2.hovertemplate='현재가: %{y:,d}원<extra></extra>'
Object.entries(srcTickers).forEach(([ticker,obj])=>{data1.x.push(obj.name);data1.y.push(obj.startBuy);data1.marker.color.push('grey');maxRange=obj.startBuy>maxRange?obj.startBuy:maxRange;});Object.entries(srcTickers).forEach(([ticker,obj])=>{data2.x.push(obj.name);data2.y.push(obj.close);data2.marker.color.push(obj.startBuy>obj.close?'blue':'red');maxRange=obj.close>maxRange?obj.close:maxRange;});layout.yaxis.range=[0,1.1*maxRange];Plotly.newPlot('plotly-price',[data1,data2],layout,Option);}
function setProfit(){var maxRange=0;var minRange=0;var layout=JSON.parse(JSON.stringify(Layout));var data={type:'bar',x:[],y:[],meta:[],hovertemplate:'%{meta}<extra></extra>',marker:{color:[]}};Object.entries(srcTickers).forEach(([ticker,obj])=>{data.x.push(obj.name);data.y.push(obj.trailingProfitRate);data.meta.push(obj.meta2);data.marker.color.push(obj.profitColor);maxRange=obj.trailingProfitRate>maxRange?obj.trailingProfitRate:maxRange;minRange=obj.trailingProfitRate<minRange?obj.trailingProfitRate:minRange;});console.log(minRange);layout.yaxis.range=[1.1*minRange,1.1*maxRange];Plotly.newPlot('plotly-profit',[data],layout,Option);}
function setPe(){var maxRange=0;var minRange=0;var layout=JSON.parse(JSON.stringify(Layout));var data1={type:'bar',x:[],y:[],meta:[],hovertemplate:'4분기연속PE: %{y:.2f}<extra></extra>',marker:{color:[]}};var data2=JSON.parse(JSON.stringify(data1));data2.hovertemplate='12개월ForwardPE: %{y:.2f}<extra></extra>',Object.entries(srcTickers).forEach(([ticker,obj])=>{data1.x.push(obj.name);data1.y.push(obj.trailingPE);data1.marker.color.push(obj.peColor);maxRange=obj.trailingPE>maxRange?obj.trailingPE:maxRange;});Object.entries(srcTickers).forEach(([ticker,obj])=>{data2.x.push(obj.name);data2.y.push(obj.estimatedPE);data2.marker.color.push(obj.epeColor);maxRange=obj.estimatedPE>maxRange?obj.estimatedPE:maxRange;});layout.yaxis.range=[0,1.1*maxRange];Plotly.newPlot('plotly-pe',[data1,data2],layout,Option);}
$(document).ready(function(){setYield();setPrice();setProfit();setPe();})